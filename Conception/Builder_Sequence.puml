@startuml
!include _common.style

title Builder sequence diagram
center footer Builder sequence diagram

'Probablement que le directeur se trouve dans le Controller...
participant ": Director" as D
participant "builder: PatientFileBuilder" as builder
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
-> D: buildPatientFile()
=======
-> D:
>>>>>>> Ajoute diagrammes conception : Builder
=======
-> D: buildPatientFile()
>>>>>>> Implémente partiellement le patron Builder.
=======
-> D: buildPatientFile()
>>>>>>> 4cbfda1767a4af82c6737e5e3239fb253c2fa2f5

activate D
'Va falloir se connecter a la BD qqpart dans une des fcts...
D -> builder: buildVisits()
'va falloir une boucle pour chercher toutes les MedicalVisits
'(Rappel, c'est une collection de visites).
activate builder

create "v: List<MedicalVisit>" as visits
builder -> visits: new()
activate visits
visits --> builder
deactivate visits
<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
=======
>>>>>>> Implémente partiellement le patron Builder.
=======
>>>>>>> 4cbfda1767a4af82c6737e5e3239fb253c2fa2f5
loop ∀ MedicalVisit for this patient in Database
    create "mv: MedicalVisits" as mv
    builder -> mv: new()
    activate mv
    mv --> builder
    deactivate mv
    builder -> visits: add(mv)
    activate visits
    visits --> builder
    deactivate visits
end loop
<<<<<<< HEAD
<<<<<<< HEAD
=======
'loop ∀ MedicalVisit for this patient in Database
'    create "mv: MedicalVisits" as mv
'    builder -> mv: new()
'    activate mv
'    mv --> builder
'    deactivate mv
'    builder -> visits: add(mv)
'    activate visits
'    visits --> builder
'    deactivate visits
'end loop
>>>>>>> Ajoute diagrammes conception : Builder
=======
>>>>>>> Implémente partiellement le patron Builder.
=======
>>>>>>> 4cbfda1767a4af82c6737e5e3239fb253c2fa2f5
builder --> D
deactivate builder

D -> builder: buildHistories()
activate builder
create "h: List<MedicalHistory>" as histories
builder -> histories: new()
activate histories
histories --> builder
deactivate histories
'loop ∀ MedicalHistory for this patient in Database
'    create "mh: MedicalHistories" as mh
'    builder -> mh: new()
'    activate mh
'    mh --> builder
'    deactivate mh
'    builder -> histories: add(mv)
'    activate histories
'    histories --> builder
'    deactivate histories
'end loop
builder --> D
deactivate builder

D -> builder: buildContactInfo()
activate builder
create "c: ContactInformation" as C
builder -> C: new()
activate C
C --> builder
deactivate C
builder --> D
deactivate builder

<<<<<<< HEAD
<<<<<<< HEAD
<<<<<<< HEAD
D -> builder: assemble()
=======
D -> builder: build()
>>>>>>> Ajoute diagrammes conception : Builder
=======
D -> builder: assemble()
>>>>>>> Implémente partiellement le patron Builder.
=======
D -> builder: assemble()
>>>>>>> 4cbfda1767a4af82c6737e5e3239fb253c2fa2f5
activate builder
create "p: PatientFile" as P
builder -> P: new()
activate P
P --> builder
deactivate P

builder -> P: setVisits(visits)
activate P
P --> builder
deactivate P

builder -> P: setHistories(histories)
activate P
P --> builder
deactivate P

builder -> P: setContactInformation(c)
activate P
P --> builder
deactivate P

builder --> D
deactivate builder

<-- D
deactivate D

@enduml